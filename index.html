<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Avacoins Palace - 20K</title>
  <style>
    :root{--bg:#020617;--card:#0f172a;--text:#e5e7eb;--green:#22c55e;--gray:#94a3b8}
    *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif}
    body{background:var(--bg);color:var(--text);padding:16px;min-height:100vh}
    .container{max-width:1200px;margin:0 auto}
    header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;margin-bottom:24px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{width:56px;height:56px;border-radius:50%;border:2px solid white;object-fit:cover}
    .logo h1{font-size:1.5rem;color:white}
    .logo p{font-size:0.9rem;color:var(--gray)}
    .btn-top{background:#1f2937;color:white;padding:10px 16px;border-radius:999px;border:none;cursor:pointer;font-weight:600}

    .layout{display:grid;grid-template-columns:1fr 340px;gap:20px}
    @media(max-width:860px){.layout{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .tag{background:var(--green);color:#052e16;padding:6px 12px;border-radius:999px;font-size:0.8rem;font-weight:700;display:inline-block}
    .price{font-size:2rem;font-weight:800;color:var(--green);margin:16px 0}
    .field{display:flex;align-items:center;gap:12px;margin:16px 0;flex-wrap:wrap}
    .field input{width:100px;padding:10px;background:#020617;border:1px solid #4b5563;color:white;text-align:center;border-radius:999px}
    .btn-buy{width:100%;background:linear-gradient(135deg,#22c55e,#16a34a);color:white;padding:16px;font-size:1.2rem;border:none;border-radius:999px;box-shadow:0 10px 30px rgba(34,197,94,0.4);cursor:pointer;transition:0.2s}
    .btn-buy:hover{transform:translateY(-3px)}

    #carrinho{position:sticky;top:16px}
    .resumo{margin:16px 0;font-size:1.1rem;line-height:1.6}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;z-index:100;padding:20px}
    .modal-box{background:var(--card);border-radius:16px;padding:24px;max-width:500px;width:100%;border:1px solid #1f2937}
    .close{float:right;background:none;color:var(--gray);font-size:2rem;border:none;cursor:pointer}
    code{background:#1e293b;padding:4px 8px;border-radius:6px;font-size:0.9rem}
    .hint{font-size:0.85rem;color:var(--gray);margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="https://d1fdloi71mui9q.cloudfront.net/b8SgVwrISpOiRT4p17SR_pOF6nXTm7emQbiqJ" alt="Avacoins Palace">
        <div>
          <h1>Avacoins Palace</h1>
          <p>20.000 Avacoins • Entrega imediata</p>
        </div>
      </div>
      <button class="btn-top" onclick="abrirPedidos()">Meus pedidos</button>
    </header>

    <div class="layout">
      <main>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2>Conta 20.000 Avacoins</h2>
            <span class="tag">PRONTA ENTREGA</span>
          </div>
          <p>Cada conta tem exatamente <strong>20.000 Avacoins</strong> prontos para usar.</p>
          <div class="price">R$ 6,00 por conta</div>

          <div class="field">
            <span>Quantidade:</span>
            <input type="number" id="qtd" min="1" value="1" onchange="calc()">
            <strong>Estoque: <span id="estoque">0</span></strong>
          </div>

          <button class="btn-buy" onclick="pagar()">Pagar com PIX • Cartão • Boleto</button>
          <p class="hint">Após clicar em pagar → confirma → contas aparecem em "Meus pedidos"</p>
        </div>
      </main>

      <aside id="carrinho" class="card">
        <h3>Resumo do pedido</h3>
        <div class="resumo" id="resumo">Selecione a quantidade</div>
      </aside>
    </div>
  </div>

  <!-- Modal Meus Pedidos -->
  <div id="modal" class="modal">
    <div class="modal-box">
      <button class="close" onclick="fechar()">×</button>
      <h3>Minhas Contas Liberadas</h3>
      <div id="lista" style="margin-top:16px;"></div>
    </div>
  </div>

  <script>
    // ================================================================
    // MANUAL COMPLETO - O QUE CADA PARTE FAZ (nunca mais se perca!)
    // ================================================================

    // 1. ESTOQUE DE CONTAS
    // Aqui você coloca TODAS as suas contas no formato: "email:senha"
    // Pode colocar quantas quiser. Quando acabar, o cliente não consegue comprar mais.
    const contas = [
      "conta001@gmail.com:senha123",
      "conta002@gmail.com:senha123",
      "conta003@gmail.com:senha123",
      "conta004@gmail.com:senha123",
      "conta005@gmail.com:senha123",
      "conta006@gmail.com:senha123",
      // ADICIONE MAIS CONTAS AQUI ↓↓↓
      // "novaconta@gmail.com:senhaqualquer",
      // "outraconta@hotmail.com:123456",
    ];

    // Mostra quantas contas ainda tem no estoque
    document.getElementById("estoque").textContent = contas.length;

    // 2. FUNÇÃO calc() → atualiza o resumo sempre que mudar a quantidade
    function calc() {
      const q = parseInt(document.getElementById("qtd").value) || 1;
      const total = q * 6;
      document.getElementById("resumo").innerHTML = 
        `<strong>${q} × Conta 20.000 Avacoins</strong><br>Total: R$ ${total.toFixed(2)}`;
    }
    calc(); // executa na hora que abre a página

    // 3. FUNÇÃO pagar() → é chamada quando clica no botão verde
    function pagar() {
      const qtd = parseInt(document.getElementById("qtd").value) || 1;

      // Verifica se tem estoque suficiente
      if (qtd > contas.length) {
        alert(`Desculpe! Só temos ${contas.length} conta(s) disponível(is) no momento.`);
        return;
      }

      // Simula o pagamento (você pode trocar por Stripe depois)
      const confirmou = confirm(
        `Você vai pagar R$ ${(qtd*6).toFixed(2)} por ${qtd} conta(s) de 20.000 Avacoins.\n\n` +
        `Confirma o pagamento?`
      );

      if (confirmou) {
        // 4. Libera as contas do estoque
        const contasLiberadas = contas.splice(0, qtd); // remove do estoque
        document.getElementById("estoque").textContent = contas.length; // atualiza contador

        // 5. Cria o pedido com data/hora
        const pedido = {
          data: new Date().toLocaleString("pt-BR"),
          quantidade: qtd,
          total: (qtd*6).toFixed(2),
          contas: contasLiberadas.map(c => {
            const [email, senha] = c.split(":");
            return {email, senha};
          })
        };

        // 6. Salva no celular do cliente (localStorage = não some nunca)
        let todosPedidos = JSON.parse(localStorage.getItem("avacoins_pedidos") || "[]");
        todosPedidos.push(pedido);
        localStorage.setItem("avacoins_pedidos", JSON.stringify(todosPedidos));

        // Atualiza o resumo e avisa o cliente
        calc();
        alert("Pagamento confirmado! Suas contas foram liberadas em 'Meus pedidos'");
        abrirPedidos(); // abre automaticamente o modal com as contas
      }
    }

    // 7. FUNÇÃO abrirPedidos() → mostra todas as contas que o cliente já comprou
    function abrirPedidos() {
      const lista = document.getElementById("lista");
      lista.innerHTML = "";
      const pedidos = JSON.parse(localStorage.getItem("avacoins_pedidos") || "[]");

      if (pedidos.length === 0) {
        lista.innerHTML = "<p style='text-align:center;color:#94a3b8'>Nenhum pedido liberado ainda neste dispositivo.</p>";
      } else {
        // Mostra do mais recente pro mais antigo
        pedidos.slice().reverse().forEach(p => {
          const box = document.createElement("div");
          box.style = "background:#1e293b;padding:16px;border-radius:12px;margin:12px 0;";
          box.innerHTML = `
            <strong>${p.quantidade} conta(s) • R$ ${p.total}</strong>
            <small style="color:#94a3b8;display:block;margin:4px 0">${p.data}</small><hr style="border:none;border-top:1px solid #334155;margin:8px 0">
          `;

          p.contas.forEach((c, i) => {
            box.innerHTML += `Conta ${i+1}: <code>${c.email}</code> | Senha: <code>${c.senha}</code><br>`;
          });

          lista.appendChild(box);
        });
      }

      document.getElementById("modal").style.display = "flex";
    }

    // 8. FUNÇÃO fechar() → fecha o modal
    function fechar() {
      document.getElementById("modal").style.display = "none";
    }

    // Atualiza o estoque caso o cliente já tenha comprado antes
    document.getElementById("estoque").textContent = contas.length;
  </script>
</body>
</html>