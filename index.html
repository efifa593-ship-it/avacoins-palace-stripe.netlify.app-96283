<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Avacoins Palace - 20K</title>
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    :root{--bg:#020617;--card:#0f172a;--text:#e5e7eb;--green:#22c55e;--gray:#94a3b8}
    *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif}
    body{background:var(--bg);color:var(--text);padding:16px;min-height:100vh}
    .container{max-width:1200px;margin:0 auto}
    header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;margin-bottom:24px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{width:56px;height:56px;border-radius:50%;border:2px solid white;object-fit:cover}
    .logo h1{font-size:1.5rem;color:white}
    .logo p{font-size:0.9rem;color:var(--gray)}
    .btn-top{background:#1f2937;color:white;padding:10px 16px;border-radius:999px;border:none;cursor:pointer;font-weight:600}

    .layout{display:grid;grid-template-columns:1fr 340px;gap:20px}
    @media(max-width:860px){.layout{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .tag{background:var(--green);color:#052e16;padding:6px 12px;border-radius:999px;font-size:0.8rem;font-weight:700;display:inline-block}
    .price{font-size:2rem;font-weight:800;color:var(--green);margin:16px 0}
    .field{display:flex;align-items:center;gap:12px;margin:16px 0;flex-wrap:wrap}
    .field input{width:100px;padding:10px;background:#020617;border:1px solid #4b5563;color:white;text-align:center;border-radius:999px}
    .btn-buy{width:100%;background:linear-gradient(135deg,#22c55e,#16a34a);color:white;padding:16px;font-size:1.2rem;border:none;border-radius:999px;box-shadow:0 10px 30px rgba(34,197,94,0.4);cursor:pointer;transition:0.2s}
    .btn-buy:hover{transform:translateY(-3px)}

    #carrinho{position:sticky;top:16px}
    .resumo{margin:16px 0;font-size:1.1rem;line-height:1.6}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;z-index:100;padding:20px}
    .modal-box{background:var(--card);border-radius:16px;padding:24px;max-width:500px;width:100%;border:1px solid #1f2937}
    .close{float:right;background:none;color:var(--gray);font-size:2rem;border:none;cursor:pointer}
    code{background:#1e293b;padding:4px 8px;border-radius:6px;font-size:0.9rem}
    .hint{font-size:0.85rem;color:var(--gray);margin-top:12px}
    #loading{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:200;justify-content:center;align-items:center}
    .spinner{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid var(--green);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="https://d1fdloi71mui9q.cloudfront.net/b8SgVwrISpOiRT4p17SR_pOF6nXTm7emQbiqJ" alt="Avacoins Palace">
        <div>
          <h1>Avacoins Palace</h1>
          <p>20.000 Avacoins • Entrega imediata</p>
        </div>
      </div>
      <button class="btn-top" onclick="abrirPedidos()">Meus pedidos</button>
    </header>

    <div class="layout">
      <main>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2>Conta 20.000 Avacoins</h2>
            <span class="tag">PRONTA ENTREGA</span>
          </div>
          <p>Cada conta tem exatamente <strong>20.000 Avacoins</strong> prontos para usar.</p>
          <div class="price">R$ 6,00 por conta</div>

          <div class="field">
            <span>Quantidade:</span>
            <input type="number" id="qtd" min="1" value="1" onchange="calc()">
            <strong>Estoque: <span id="estoque">1</span></strong>
          </div>

          <button class="btn-buy" onclick="pagar()">Pagar com PIX • Cartão • Boleto</button>
          <p class="hint">Pagamento 100% seguro via Stripe • Entrega automática</p>
        </div>
      </main>

      <aside id="carrinho" class="card">
        <h3>Resumo do pedido</h3>
        <div class="resumo" id="resumo">Selecione a quantidade</div>
      </aside>
    </div>
  </div>

  <!-- Loading -->
  <div id="loading">
    <div class="spinner"></div>
  </div>

  <!-- Modal Meus Pedidos -->
  <div id="modal" class="modal">
    <div class="modal-box">
      <button class="close" onclick="fechar()">×</button>
      <h3>Minhas Contas Liberadas</h3>
      <div id="lista" style="margin-top:16px;"></div>
    </div>
  </div>

  <script>
    // Stripe com suas chaves LIVE
    const stripe = Stripe('pk_live_51SaMyoL0CPL2nGCEq5b5YXzDzJ9qgE0rlx2gw4nJYuV7rAAzbhFwNkdGXC9mWhmcN2xiWm4bM2NFumtcyMkUIjmU00JAYTN3Zn');

    // Suas contas reais (adicione mais no painel depois)
    let contas = ['ph.a.n.don.g.nhi19.58.5@gmail.com:tiagoSILVA123@'];
    document.getElementById("estoque").textContent = contas.length;

    function calc() {
      const q = parseInt(document.getElementById("qtd").value) || 1;
      const total = q * 6;
      document.getElementById("resumo").innerHTML = 
        `<strong>${q} × Conta 20.000 Avacoins</strong><br>Total: R$ ${total.toFixed(2)}`;
    }
    calc();

    async function pagar() {
      const qtd = parseInt(document.getElementById("qtd").value) || 1;
      if (qtd > contas.length) return alert(`Só temos ${contas.length} conta(s) no estoque!`);

      document.getElementById("loading").style.display = "flex";

      try {
        // Cria sessão no Stripe (back-end necessário - use o PHP abaixo)
        const response = await fetch('/create-checkout', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ quantidade: qtd })
        });
        const { id } = await response.json();
        stripe.redirectToCheckout({ sessionId: id });
      } catch (error) {
        alert('Erro no pagamento. Tente novamente.');
        document.getElementById("loading").style.display = "none";
      }
    }

    function abrirPedidos() {
      // Lógica igual ao anterior (localStorage)
      const lista = document.getElementById("lista");
      // ... (código do modal igual ao anterior)
      document.getElementById("modal").style.display = "flex";
    }

    function fechar() {
      document.getElementById("modal").style.display = "none";
    }
  </script>
</body>
</html>
