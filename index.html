<h1>loja palace</h1>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Avacoins Palace ‚Ä¢ 20K</title>
<style>
:root{--bg:#0f0a1f;--card:#1a1033;--text:#e2e8f0;--green:#10b981;--purple:#a78bfa;--gray:#64748b}
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif}
body{background:var(--bg);color:var(--text);min-height:100dvh;position:relative}
.container{max-width:420px;margin:0 auto;padding:16px}
header{text-align:center;margin:32px 0 20px}
.logo-img{width:70px;height:70px;border-radius:50%;border:3px solid var(--purple);box-shadow:0 0 20px #a78bfa50}
h1{font-size:1.9rem;font-weight:800;background:linear-gradient(135deg,#a78bfa,#10b981);-webkit-background-clip:text;background-clip:text;color:transparent}
.card{background:var(--card);border-radius:20px;padding:22px;box-shadow:0 15px 40px #0009;border:1px solid #2d1b4d}
.tag{background:var(--green);color:#064e3b;padding:6px 14px;border-radius:50px;font-weight:700;font-size:0.85rem}
.price{font-size:2.5rem;font-weight:900;color:var(--green);margin:14px 0}
.btn{width:100%;padding:16px;border-radius:16px;font-weight:800;cursor:pointer;margin:10px 0;transition:0.2s}
.btn-buy{background:linear-gradient(135deg,#10b981,#059669);color:white;font-size:1.35rem;box-shadow:0 8px 25px #10b98160}
.btn-pix{background:#2d1b4d;color:var(--purple);font-size:1.1rem;border:2px solid var(--purple)}
.btn-clear-history{background:#ff6347;color:white;border:2px solid #ff6347;margin-top:5px;}
.btn-esgotado {
    background: #6c757d !important;
    cursor: not-allowed !important;
    box-shadow: none !important;
}
.btn:active{transform:scale(0.97)}

/* Estilos da √Årea ADM */
#admTela{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;z-index:1000;flex-direction:column;color:var(--text);padding:20px}
#admConteudo{background:var(--card);padding:25px;border-radius:20px;width:100%;max-width:400px;text-align:center}
#admConteudo h2{color:var(--purple);margin-bottom:15px}
#areaContas, #inputNovoPreco{width:100%;padding:10px;background:#0f0a1f;border:1px solid var(--purple);color:white;margin-bottom:10px;border-radius:10px;box-sizing:border-box}
#areaContas{height:100px;}
.btn-adm{width:100%;padding:12px;border-radius:10px;font-weight:700;cursor:pointer;margin:5px 0;transition:0.2s;font-size:1rem}
.btn-add{background:var(--green);color:#064e3b}
.btn-limpar{background:#ff6347;color:white}
.btn-fechar{background:var(--gray);color:white;margin-top:10px}
.btn-update-price {background: #a78bfa; color: white;}
</style>
</head>
<body>

<div class="container">
  <header>
    <img src="https://d1fdloi71mui9q.cloudfront.net/b8SgVwrISpOiRT4p17SR_pOF6nXTm7emQbiqJ" class="logo-img" alt="Logo">
    <h1>Avacoins Palace</h1>
    <p style="color:var(--gray);font-size:0.9rem">20.000 Avacoins ‚Ä¢ Entrega imediata</p>
  </header>

  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <h2 style="font-size:1.4rem">Conta 20K</h2>
      <span class="tag">PRONTA ENTREGA</span>
    </div>
    <div class="price" id="precoAtual">R$ 6,00</div>

    <div style="text-align:center;font-size:1.1rem;font-weight:700;margin:16px 0">
      Estoque: <span id="estoque" style="color:var(--green)">0</span>
    </div>

    <button class="btn btn-buy" id="btnComprar" onclick="iniciarPagamento()">
      COMPRAR COM PIX R$6,00
    </button>
    
    <button class="btn btn-pix" onclick="abrirPedidos()" style="margin-top:20px">
      Meus pedidos
    </button>
    
    <button class="btn btn-pix btn-clear-history" onclick="limparHistoricoPedidos()">
      LIMPAR HIST√ìRICO
    </button>
  </div>
  
  <div style="text-align:center; margin-top: 15px;">
    <button class="btn-pix btn" style="width: 50%; font-size: 0.9rem" onclick="entrarADM()">
      √Årea ADM ‚öôÔ∏è
    </button>
  </div>
</div>

<div id="admTela">
    <div id="admConteudo">
        <h2>√Årea Administrativa</h2>
        
        <h3 style="color:var(--purple); margin-top: 15px; font-size: 1.1rem;">üí∞ Alterar Pre√ßo</h3>
        <input type="number" id="inputNovoPreco" placeholder="Novo pre√ßo (ex: 7.50)" step="0.01" min="0.01">
        <button class="btn-adm btn-update-price" onclick="atualizarPreco()">
            ATUALIZAR PRE√áO
        </button>

        <hr style="border-top: 1px solid #3d2b63; margin: 15px 0;">

        <h3 style="color:var(--purple); font-size: 1.1rem;">üöö Entrega Manual</h3>
        <p style="color:var(--gray); font-size: 0.9rem; margin-bottom: 5px;">Use AP√ìS confirmar o pagamento do cliente em seu sistema banc√°rio.</p>
        <button class="btn-adm btn-add" onclick="confirmarPagamentoEEntregar()">
            ‚úÖ CONFIRMAR PAGAMENTO E ENTREGAR
        </button>

        <hr style="border-top: 1px solid #3d2b63; margin: 15px 0;">
        
        <h3 style="color:var(--purple); font-size: 1.1rem;">üì¶ Gerenciar Estoque</h3>
        <p style="color:var(--green); margin-bottom: 10px;">Estoque atual: <span id="estoqueAdm">0</span> contas</p>
        
        <textarea id="areaContas" placeholder="Cole as novas contas aqui (uma por linha, ex: email:senha)"></textarea>
        
        <button class="btn-adm btn-add" onclick="adicionarContas()">
            ‚ûï ADICIONAR AO ESTOQUE
        </button>
        
        <button class="btn-adm btn-limpar" onclick="limparEstoque()">
            üóëÔ∏è LIMPAR TODO O ESTOQUE
        </button>
        
        <button class="btn-adm btn-fechar" onclick="fecharADM()">
            FECHAR
        </button>
    </div>
</div>


<script>
// ====================================================================
// === CONFIGURA√á√ïES GERAIS ===
// ====================================================================
const LINK_PAGAMENTO = "https://payment-link-v3.ton.com.br/pl_DOeMRAZXN37pkgLUviEvmE54GwPVlqvz"; 
const SENHA_ADM = "minhasenha123"; 
// ====================================================================

let preco = parseFloat(localStorage.getItem("avacoins_preco")) || 6.00;
let contas = JSON.parse(localStorage.getItem("avacoins_estoque") || '["avacoins:secreto123", "avacoins2:senha456"]');

function formatarMoeda(valor) {
    return 'R$ ' + valor.toFixed(2).replace('.', ',');
}

function atualizarEstoque() {
  const count = contas.length;
  document.getElementById("estoque").textContent = count;
  const estoqueAdmElement = document.getElementById("estoqueAdm");
  if (estoqueAdmElement) {
      estoqueAdmElement.textContent = count;
  }
  
  // Atualiza a apar√™ncia e o estado do bot√£o de compra
  const btnComprar = document.getElementById("btnComprar");
  if (count === 0) {
      btnComprar.classList.add('btn-esgotado');
      btnComprar.textContent = 'ESTOQUE ESGOTADO üò≠';
  } else {
      btnComprar.classList.remove('btn-esgotado');
      btnComprar.textContent = `COMPRAR COM PIX ${formatarMoeda(preco)}`;
  }
}

function atualizarPrecoUI() {
    const precoFormatado = formatarMoeda(preco);
    document.getElementById("precoAtual").textContent = precoFormatado;
    
    // For√ßa a atualiza√ß√£o do texto do bot√£o de compra
    const btnComprar = document.getElementById("btnComprar");
    if (contas.length > 0) {
        btnComprar.textContent = `COMPRAR COM PIX ${precoFormatado}`;
    }
}

/**
 * Verifica se o cliente tem uma compra pendente.
 */
function verificarPendencia() {
    const pendente = localStorage.getItem("compra_pendente");
    if (pendente === "true") {
        alert("‚ö†Ô∏è VOC√ä TEM UMA COMPRA PENDENTE! Por favor, volte ao site de pagamento e pague o PIX. Sua conta ser√° liberada em 'Meus Pedidos' AP√ìS a confirma√ß√£o do pagamento.");
    }
}

// Chama as fun√ß√µes ao carregar
atualizarEstoque();
atualizarPrecoUI();
verificarPendencia(); // Verifica se h√° pend√™ncia ao carregar a p√°gina

// ====================================================================
// === FUN√á√ïES DA √ÅREA ADMINISTRATIVA ===
// ====================================================================

function entrarADM() {
    const senhaDigitada = prompt("Insira a senha do Administrador:");
    if (senhaDigitada === SENHA_ADM) {
        document.getElementById('admTela').style.display = 'flex';
        document.getElementById('inputNovoPreco').value = preco.toFixed(2);
        atualizarEstoque();
    } else if (senhaDigitada !== null) {
        alert("Senha incorreta!");
    }
}

function fecharADM() {
    document.getElementById('admTela').style.display = 'none';
    document.getElementById('areaContas').value = ''; 
}

function atualizarPreco() {
    const novoPrecoTexto = document.getElementById('inputNovoPreco').value;
    const novoPreco = parseFloat(novoPrecoTexto);

    if (isNaN(novoPreco) || novoPreco <= 0) {
        return alert("‚ùå Por favor, insira um pre√ßo v√°lido (n√∫mero maior que zero).");
    }

    preco = novoPreco;
    localStorage.setItem("avacoins_preco", preco);
    atualizarPrecoUI();
    atualizarEstoque(); 
    alert(`‚úÖ Pre√ßo atualizado com sucesso para ${formatarMoeda(preco)}!`);
    fecharADM();
}

function adicionarContas() {
    const textoContas = document.getElementById('areaContas').value.trim();
    if (!textoContas) {
        return alert("Nenhuma conta para adicionar.");
    }

    const novasContas = textoContas.split('\n').map(c => c.trim()).filter(c => c.length > 0);

    if (novasContas.length > 0) {
        contas = contas.concat(novasContas);
        localStorage.setItem("avacoins_estoque", JSON.stringify(contas));
        document.getElementById('areaContas').value = ''; 
        atualizarEstoque();
        alert(`‚úÖ ${novasContas.length} contas adicionadas com sucesso!`);
    } else {
        alert("Nenhuma conta v√°lida encontrada para adicionar.");
    }
}

function limparEstoque() {
    if (confirm("‚ö†Ô∏è ATEN√á√ÉO! Tem certeza que deseja REMOVER TODAS as contas do estoque?")) {
        contas = [];
        localStorage.setItem("avacoins_estoque", JSON.stringify(contas));
        atualizarEstoque();
        alert("‚úÖ Estoque limpo com sucesso!");
        fecharADM();
    }
}

/**
 * Fun√ß√£o para o ADM confirmar o pagamento, entregar a conta e limpar o flag de pend√™ncia.
 */
function confirmarPagamentoEEntregar() {
    const pendente = localStorage.getItem("compra_pendente");
    
    if (contas.length === 0) {
        alert("‚ùå Estoque zerado. N√£o √© poss√≠vel entregar.");
        return;
    }

    if (pendente !== "true") {
        if (!confirm("Aten√ß√£o: N√£o h√° nenhuma compra pendente registrada. Deseja entregar a conta e consumir o estoque mesmo assim?")) {
            return;
        }
    } else if (!confirm("CONFIRMAR: Voc√™ tem certeza que o cliente pagou? O pr√≥ximo item do estoque ser√° consumido e entregue no hist√≥rico dele.")) {
        return;
    }

    // 1. ENTREGA (Consome a conta do estoque)
    const conta = contas.shift();
    localStorage.setItem("avacoins_estoque", JSON.stringify(contas));

    // 2. REGISTRA NO HIST√ìRICO DE PEDIDOS (Libera a conta para o cliente)
    const historico = JSON.parse(localStorage.getItem("avacoins_pedidos") || "[]");
    historico.push({
        data: new Date().toLocaleString("pt-BR"), 
        conta: conta, 
        status: 'Pago e Entregue Manualmente'
    });
    localStorage.setItem("avacoins_pedidos", JSON.stringify(historico));

    // 3. REMOVE A MENSAGEM DE PEND√äNCIA (O cliente n√£o ver√° mais o aviso)
    localStorage.removeItem("compra_pendente");

    // 4. ATUALIZA TELA E ALERTA
    atualizarEstoque();
    alert(`‚úÖ Conta entregue com sucesso: ${conta}. O flag de pend√™ncia foi limpo.`);
    fecharADM();
}

// ====================================================================
// === FUN√á√ïES DE VENDAS E PEDIDOS (COM PEND√äNCIA) ===
// ====================================================================

function iniciarPagamento() {
  if (contas.length === 0) {
      alert("‚ùå ESTOQUE ESGOTADO! N√£o √© poss√≠vel comprar agora.");
      return; 
  }
  
  // MARCA a compra como PENDENTE (N√ÉO ENTREGA A CONTA AINDA)
  localStorage.setItem("compra_pendente", "true"); 
  
  window.open(LINK_PAGAMENTO, "_blank");
  
  alert("‚úÖ Compra iniciada! Agora voc√™ precisa PAGAR O PIX para liberar a conta. Se voc√™ voltar sem pagar, a conta s√≥ ser√° liberada AP√ìS a confirma√ß√£o do seu pagamento!");
}

function abrirPedidos() {
  const lista = JSON.parse(localStorage.getItem("avacoins_pedidos") || "[]");
  if (lista.length === 0) {
    return alert("Nenhum pedido resgatado ainda.");
  }
  let texto = "SUAS CONTAS LIBERADAS (Hist√≥rico Local):\n\n";
  lista.reverse().forEach(p => texto += `Data: ${p.data}\nConta: ${p.conta}\n\n`);
  alert(texto);
}

function limparHistoricoPedidos() {
    if (confirm("‚ö†Ô∏è ATEN√á√ÉO! Tem certeza que deseja REMOVER TODO o hist√≥rico de pedidos resgatados? Esta a√ß√£o √© irrevers√≠vel e s√≥ limpa o hist√≥rico local.")) {
        localStorage.removeItem("avacoins_pedidos");
        alert("‚úÖ Hist√≥rico de pedidos removido com sucesso!");
    }
}
</script>
</body>
</html>

